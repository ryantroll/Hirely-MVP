<div class="form-loader" ng-show="!dataLoaded">
    <p>Loading</p>
    <div class="loader"></div>
</div>

<div class="position" ng-show="dataLoaded && !dataError">
    <!--sticky-header-->
    <div class="sticky-header padding" id="stickyHeader">
        <div class="max-width clearfix">
            <div class="row">
                <div class="col-xs-12 col-sm-8 col-md-8 col-lg-8">
                    <div class="title">
                        <h3>{{business.name}} - {{location.name}} / {{position.title}}</h3>
                    </div>
                </div>
                <div class="col-sm-4 visible-sm-block visible-md-block visible-lg-block">
                    <div class="wage">
                        <h3>${{position.compensation.wageAmountSalary || position.compensation.wageAmount}} <span class="pull-right">{{position.compensation.wageType}}</span></h3>
                    </div>
                </div>
            </div><!--row-->
        </div><!--max-width-->
    </div><!--sticky-header-->

    <!--hero-image-->
    <div class="row">
        <div class="col-sm-12">
            <div class="hero">
                <img src="{{heroImageURL}}"/>
                <div class="tag">${{position.compensation.wageAmountSalary || position.compensation.wageAmount}} {{position.compensation.wageType}}</div>
            </div>
        </div>
    </div><!--hero-image-row-->

    <!--position-header-->
    <div class="row">
        <div class="col-sm-12">
            <div class="pos-header padding">
                <div class="logo">
                    <div class="circle"><img src="{{business.logoImageURL}}"/></div>
                </div>

                <div class="row">
                    <div class="max-width clearfix">
                        <div class="col-sm-6">
                            <div class="title">
                                <span class="icon icon-{{getPositionIcon(position.occId, 'cssClass')}}" style="color:{{getPositionIcon(position.occId, 'iconColor')}}"></span>
                                <h1>{{position.title}}</h1>
                                <h2>{{business.name}}</h2>
                                <h3>{{location.city}}, {{location.state}} - {{location.name}}</h3>
                            </div>
                        </div><!--col-->
                        <div class="col-sm-6">
                            <div class="features clearfix">
                                <ul>
                                    <li>
                                        <span class="icon icon-clock_outlone_icon"></span>
                                        {{workTypeTitle}}
                                    </li>
                                    <li>
                                        <span class="icon icon-exit_icon"></span>
                                        {{position.openingsCount}} Openings
                                    </li>
                                    <li>
                                        <span class="icon icon-moneybag_outline_icon"></span>
                                        {{numOfBenefits}} Benefits
                                    </li>
                                </ul>
                            </div><!--features-->
                        </div><!--col-->
                    </div><!--max-width-->
                </div><!--row-->
            </div><!--header-->
        </div><!--col-->
    </div><!--position-header-row-->

    <!--position-details-->
    <div class="details padding">
        <div class="max-width">
            <div class="row">
                <div class="col-sm-8" id="posDetails">
                    <div class="box">
                        <div class="title">
                            <h3><i class="icon-info_outline_icon"></i>ABOUT POSITION</h3>
                        </div>
                        <div class="copy box-inner">
                            <div ng-bind-html="positionDescriptionHtml"></div>
                        </div>
                    </div><!--box-->

                    <div class="box">
                        <div class="title">
                            <h3><i class="icon-moneybag_outline_icon"></i>COMPENSATION &amp; BENEFITS</h3>
                        </div>
                        <!--<div class="copy box-inner">-->
                            <!--<ul>-->
                                <!--<li>${{position.compensation.wageAmount}} {{position.compensation.wageType}}</li>-->
                            <!--</ul>-->
                        <!--</div>-->
                        <div class="benefites  box-inner clearfix">
                            <div class="item" ng-if="position.compensation.wageAmount">
                                <div class="icon icon-moneybag_outline_icon"></div>
                                <div class="title">${{position.compensation.wageAmountSalary || position.compensation.wageAmount}} {{position.compensation.wageType}}</div>
                            </div>
                            <div class="item" ng-if="position.benefits.commission">
                                <div class="icon icon-commission_icon"></div>
                                <div class="title">COMMISSION</div>
                            </div>
                            <div class="item" ng-if="position.benefits.tips">
                                <div class="icon icon-tipjar_outline_icon"></div>
                                <div class="title">Tips</div>
                            </div>
                            <div class="item" ng-if="position.benefits.bonus">
                                <div class="icon icon-bonus_outline_icon"></div>
                                <div class="title">Bonus</div>
                            </div>
                            <div class="item" ng-if="position.benefits.paidVacation">
                                <div class="icon icon-vacation_outline_icon"></div>
                                <div class="title">Paid Vacation</div>
                            </div>
                            <div class="item" ng-if="position.benefits.paidSickTime">
                                <div class="icon icon-sick_outline_icon"></div>
                                <div class="title">Paid Sick Time</div>
                            </div>
                            <div class="item" ng-if="position.benefits.healthInsurance">
                                <div class="icon icon-insurance_outline_icon"></div>
                                <div class="title">Health Insurance</div>
                            </div>
                            <div class="item" ng-if="position.benefits.dentalInsurance">
                                <div class="icon icon-insurance_outline_icon"></div>
                                <div class="title">Dental Insurance</div>
                            </div>
                            <div class="item" ng-if="position.benefits.retirementPlan">
                                <div class="icon icon-piggbank_outline_icon"></div>
                                <div class="title">Retirement Plan</div>
                            </div>
                            <div class="item" ng-if="position.benefits.flexibleSchedule">
                                <div class="icon icon-calendar_outline_icon"></div>
                                <div class="title">Flexible Schedule</div>
                            </div>
                            <div class="item" ng-if="position.benefits.discounts">
                                <div class="icon icon-discount_outline_icon"></div>
                                <div class="title">Discounts</div>
                            </div>

                        </div>
                    </div><!--box-->

                    <div class="box">
                        <div class="title">
                            <h3><i class="icon-clock_outlone_icon"></i>Availability</h3>
                        </div>
                        <div class="copy box-inner">
                            <ul>
                                <li>{{position.hoursPerWeekMin}} Hours Minimum Per Week</li>
                                <li>{{position.hoursPerWeekMax}} Hours Maximum Per Week</li>
                            </ul>
                        </div>
                    </div><!--box-->

                    <div class="box" ng-show="position.idealCandidate.length > 0">
                        <div class="title">
                            <h3><i class="icon-heart_outline_icon"></i>ideal candidate</h3>
                        </div>
                        <div class="copy  box-inner">
                            <ul>
                                <li ng-repeat="item in position.idealCandidate">{{item}}</li>
                            </ul>
                        </div>
                    </div><!--box-->

                    <div class="box" ng-show="position.jobDuties.length > 0">
                        <div class="title">
                            <h3><i class="icon-employeebadge_outline_icon"></i>ON THE JOB</h3>
                        </div>
                        <div class="copy box-inner">
                            <ul>
                                <li ng-repeat="duty in position.jobDuties">{{duty}}</li>
                            </ul>
                        </div>
                    </div><!--box-->

                    <div class="box" ng-show="position.specialSkills.length > 0">
                        <div class="title">
                            <h3><i class="icon-employeebadge_outline_icon"></i>Career Development</h3>
                        </div>
                        <div class="copy box-inner">
                            <ul>
                                <li ng-repeat="duty in position.specialSkills">{{duty}}</li>
                            </ul>
                        </div>
                    </div><!--box-->


                    <div class="box">
                        <div class="title">
                            <h3><i class="icon icon-building_outline_icon" style="float:none"></i> ABOUT BUSINESS &amp; LOCATION</h3>
                        </div>
                        <div class="copy box-inner">
                            <div ng-bind-html="businessDescriptionHtml"></div>
                            <h4>{{business.name}} - {{location.city}}, {{location.state}} - {{location.name}}</h4>
                            <div class="availability">
                                <ul>
                                    <li ng-repeat="range in aggregatedWeekTimes"><b>{{range.label}}:</b> {{range.hoursRanges.join(' | ')}}</li>
                                </ul>
                            </div>
                            <div>
                                {{location.formattedAddress}}<br>
                                <!-- 0.5 mi from my location (change) -->
                            </div>
                        </div>
                    </div><!--box-->


                </div><!--col-->

                <div class="col-sm-4">
                    <div class="sidebar" id="sideBar">
                        <div class="box visible-sm-block visible-md-block visible-lg-block" id="wageBox">
                            <div class="title dark-blue">
                                <h3>${{position.compensation.wageAmountSalary || position.compensation.wageAmount}} <span class="pull-right">{{position.compensation.wageType}}</span></h3>
                            </div>
                            <div class="buttons box-inner">
                                <button id="applyButton" title="Apply button.  If disabled, applications are not currently being accepted through the Hirely application." class="btn btn-lrg red" ng-click="applyClick()" ng-hide="business.disabled || location.disabled || position.disabled">APPLY</button>
                                <button title="Applications not currently accepted" class="btn btn-lrg" disabled ng-show="business.disabled || location.disabled || position.disabled">Applications are not currently being accepted.</button>
                                <!-- <button class="btn btn-secondary"><i class="icon-share_icon"></i>SHARE</button> -->
                                 <!--<button class="btn btn-secondary" id="favButton" ng-click="favoriteClick()" ng-class="{'fav-active':thisPositionFav}"><i ng-class="{'icon-heart_outline_icon':!thisPositionFav, 'icon-heart_tick_icon':thisPositionFav}"></i>FAVORITE</button>-->
                            </div>
                        </div><!--box-->

                        <div class="box" ng-show="otherPositions.length > 1">
                            <div class="title gray">
                                <h3>OTHER Positions at location</h3>
                            </div>
                            <div class="positions-list">
                                <ul>
                                    <li ng-repeat="_pos in otherPositions">
                                        <a href="javascript:void(0);" ng-click="otherPositionClick(_pos.slug)" style="color:{{getPositionIcon(_pos.occId, 'iconColor')}}">
                                            <div class="icon icon-{{getPositionIcon(_pos.occId, 'cssClass')}}" style="color:{{getPositionIcon(_pos.occId, 'iconColor')}}"></div>
                                            <div class="copy">
                                                <h4>{{_pos.title}}</h4>
                                                <p>${{_pos.compensation.wageAmountSalary || _pos.compensation.wageAmount}} {{_pos.compensation.wageType}} - {{getWorkTypeTitle(_pos.workType)}}</p>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div><!--box-->
                    </div><!--sidebar-->
                </div><!--col-->
            </div>
        </div><!--max-width-->
    </div><!--details-->

    <div id="application" class="application padding max-width">
        <div class="row">
            <div class="col-sm-12">
                <div class="box">
                    <br>
                    <h3 class="text-center">APPLICATION</h3>
                    <p class="text-center" style="color:gray;">If you think you would be a good fit, please complete the information below and weâ€™ll update you by text and email.</p>

                    <p id="applyButtonBottomP" class="text-center" ng-show="!applyClicked">
                        <button title="Apply button" class="btn btn-lrg red" ng-click="applyClick()" ng-hide="business.disabled || location.disabled || position.disabled">Start</button>
                        <button title="Applications not current accepted" class="btn btn-lrg" disabled ng-show="business.disabled || location.disabled || position.disabled">Applications are not currently being accepted.</button>
                    </p>

                    <div class="copy box-inner">
                        <div class="hirely-form" ng-class="{'form-disabled': !applyClicked}">
                            <ng-form class="form-horizontal" name="applicationForm" novalidate>
                                <fieldset>

                                    <div class="row">
                                        <div class="col-sm-6">
                                            <div class="field-wrapper" ng-class="{'error': !applicationForm.firstName.$valid && applicationForm.firstName.$dirty, 'valid' : applicationForm.firstName.$valid}">
                                                <label for="firstName">
                                                    First Name
                                                    <span class="fa fa-check feedback-valid"></span>
                                                    <span class="fa fa-close feedback-error"></span>
                                                </label>
                                                <input type="text" class="text-field" id="firstName" name="firstName" ng-model="application.user.firstName" required/>
                                                <!-- <input type="text" /> -->
                                            </div>
                                        </div>
                                        <div class="col-sm-6">
                                            <div class="field-wrapper" ng-class="{'error': !applicationForm.lastName.$valid && applicationForm.lastName.$dirty, 'valid' : applicationForm.lastName.$valid}">
                                                <label for="lastName">
                                                    Last Name
                                                    <span class="fa fa-check feedback-valid"></span>
                                                    <span class="fa fa-close feedback-error"></span>
                                                </label>
                                                <input type="text" class="text-field" name="lastName" id="lastName" ng-model="application.user.lastName" required/>
                                            </div>
                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-sm-4">
                                            <div class="field-wrapper" ng-class="{'error': !applicationForm.email.$valid && applicationForm.email.$dirty, 'valid' : applicationForm.email.$valid}">
                                                <label for="email">
                                                    Email
                                                    <span class="fa fa-check feedback-valid"></span>
                                                    <span class="fa fa-close feedback-error"></span>
                                                </label>
                                                <input type="email" class="text-field" name="email" id="email"
                                                       ng-model="application.user.email"
                                                       ng-pattern='/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/'
                                                       required autocapitalize="none"
                                                />
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="field-wrapper" ng-class="{'error': !applicationForm.mobile.$valid && applicationForm.mobile.$dirty, 'valid' : applicationForm.mobile.$valid}">
                                                <label for="mobile">
                                                    Primary Phone Number
                                                    <span class="fa fa-check feedback-valid"></span>
                                                    <span class="fa fa-close feedback-error"></span>
                                                </label>
                                                <input type="text" class="text-field" id="mobile" name="mobile" ng-model="application.user.mobile" required/>
                                                <!-- <input type="text" /> -->
                                            </div>
                                        </div>
                                        <div class="col-sm-4">
                                            <div class="field-wrapper">
                                                <label>
                                                    Communication Preference
                                                </label>
                                                <br>
                                                <input type="radio" ng-model="application.user.preferences.communications.preferredMode" id="commEmailPref" value="0" name="commpref"/>
                                                <label for="commEmailPref">Email</label>&nbsp;&nbsp;
                                                <input type="radio" ng-model="application.user.preferences.communications.preferredMode" id="commTextPref" value="1" name="commpref"/>
                                                <label for="commTextPref">Text</label>&nbsp;&nbsp;
                                                <input type="radio" ng-model="application.user.preferences.communications.preferredMode" id="commBothPref" value="2" name="commpref"/>
                                                <label for="commBothPref">Both</label>&nbsp;&nbsp;
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-sm-6" ng-repeat="taq in application.textAreaQs">
                                            <div class="field-wrapper" ng-class="{'error': !applicationForm.taq_{{$index}}.$valid && applicationForm.taq_{{$index}}.$dirty, 'valid' : applicationForm.taq_{{$index}}.$valid}">
                                                <label for="taq_{{$index}}">
                                                    {{taq.question}}
                                                    <span class="fa fa-check feedback-valid"></span>
                                                    <span class="fa fa-close feedback-error"></span>
                                                </label>
                                                <textarea class="text-field" name="taq_{{$index}}" id="taq_{{$index}}" ng-model="taq.answer" required></textarea>
                                                <character-counter field-id="taq_{{$index}}" max="{{taq.maxChars ? taq.maxChars : 140}}"></character-counter>
                                            </div>
                                        </div>

                                        <div class="col-sm-6 prescreenBooleanQuestions">
                                            <label>
                                                {{business.name}} values the following qualities.  Check all that apply to you:
                                            </label>

                                            <div class="field-wrapper checkbox-div" ng-repeat="bq in application.booleanQs">
                                                <input type="checkbox" id="bq_{{$index}}" name="bq_" ng-model="bq.answer" />
                                                <label for="bq_{{$index}}">
                                                    {{bq.question}}
                                                </label>
                                            </div>

                                        </div>
                                    </div>


                                    <div class="row">
                                        <div class="col-sm-12">
                                            <div class="field-wrapper text-center">
                                                <button id="applicationSubmitButton" class="btn btn-lg red" ng-disabled="!applicationForm.$valid || applicationBlocked" ng-click="$('#applicationSubmitButton').disable(); registerPasswordUser()">Submit</button>
                                                <div style="padding-top:1em;">
                                                    By clicking submit, you agree to Hirely's<br>
                                                    <a target="_blank"  href="http://hirely.us/terms-conditions/">Terms of Service</a>
                                                    &amp; <a target="_blank" href="http://hirely.us/privacy-policy">Privacy Policy</a>.
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </fieldset>
                            </ng-form>
                        </div>
                    </div>
                </div><!--box-->
            </div><!--col-sm-12-->
        </div><!--row-->
    </div><!--business-->

    <!--mobile-footer-->
    <div class="mobile-footer visible-xs-block">
        <div class="buttons">
            <!-- <button class="btn red"><i class="icon-share_icon"></i></button> -->
            <button class="btn btn-lrg red" ng-click="applyClick()" ng-hide="applyClicked || business.disabled || location.disabled || position.disabled">APPLY</button>
             <!--<button class="btn red" ng-click="favoriteClick($event)" ng-class="{'fav-active':thisPositionFav}"><i ng-class="{'icon-heart_outline_icon':!thisPositionFav, 'icon-heart_tick_icon':thisPositionFav}"></i></button>-->
        </div>
    </div><!--mobile-footer-->

</div><!--position-->

<div class="content" ng-show="dataLoaded && dataError">
    <div class="row">
        <div class="col-sm-12 text-center">
            <h1><i class="red-text glyphicon glyphicon-exclamation-sign"></i></h1>
            <h4>Position Not Found!</h4>
        </div>
    </div>
</div>